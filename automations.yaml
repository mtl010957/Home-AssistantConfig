- id: '1497804129147'
  alias: House fan off below 80 degrees
  trigger:
  - below: '80'
    entity_id: sensor.ah02_th_temperature
    for: 00:02:00
    platform: numeric_state
  condition:
  - condition: state
    entity_id: switch.aeotec_micro_switch_2nd_edition_switch
    state: 'on'
  action:
  - data:
      entity_id: fan.house_fan
    service: fan.turn_off
- id: '1500947016373'
  alias: Camera Motion and Floods On Armed Away
  trigger:
  - entity_id: alarm_control_panel.3629_alarm
    platform: state
    to: armed_away
  action:
  - entity_id: switch.foscam_cam1_motion
    service: switch.turn_on
  - entity_id: switch.foscam_cam2_motion
    service: switch.turn_on
  - entity_id: switch.foscam_cam3_motion
    service: switch.turn_on
  - entity_id: switch.generic_cam4_motion
    service: switch.turn_on
  - entity_id: switch.front_yard_light
    service: switch.turn_on
- id: '1500947016399'
  alias: Camera Motion and Floods On Armed Night
  trigger:
  - entity_id: alarm_control_panel.3629_alarm
    platform: state
    to: armed_night
  action:
  - entity_id: switch.foscam_cam1_motion
    service: switch.turn_on
  - entity_id: switch.foscam_cam2_motion
    service: switch.turn_on
  - entity_id: switch.front_yard_light
    service: switch.turn_on
- id: '1500947000000'
  alias: Camera Motion On Armed Home
  trigger:
  - entity_id: alarm_control_panel.3629_alarm
    platform: state
    to: armed_home
  action:
  - entity_id: switch.foscam_cam1_motion
    service: switch.turn_on
  - entity_id: switch.foscam_cam2_motion
    service: switch.turn_on
- id: '1500948466889'
  alias: Camera Motion and Floods Off Disarmed
  trigger:
  - entity_id: alarm_control_panel.3629_alarm
    platform: state
    to: disarmed
  action:
  - entity_id: switch.foscam_cam1_motion
    service: switch.turn_off
  - entity_id: switch.foscam_cam2_motion
    service: switch.turn_off
  - entity_id: switch.foscam_cam3_motion
    service: switch.turn_off
  - entity_id: switch.generic_cam4_motion
    service: switch.turn_off
  - entity_id: switch.front_yard_light
    service: switch.turn_off
- id: '1800999911110'
  alias: 3629cam4 Up
  trigger:
  - below: '-0.1'
    entity_id: input_number.3629cam4_up_down
    platform: numeric_state
  action:
  - entity_id: switch.generic_cam4_up
    service: switch.turn_on
- id: '1800999911111'
  alias: 3629cam4 Up Down Stop
  trigger:
  - above: '-0.1'
    below: '0.1'
    entity_id: input_number.3629cam4_up_down
    platform: numeric_state
  action:
  - entity_id: switch.generic_cam4_up
    service: switch.turn_off
  - entity_id: switch.generic_cam4_down
    service: switch.turn_off
- id: '1800999911112'
  alias: 3629cam4 Down
  trigger:
  - above: '0.1'
    entity_id: input_number.3629cam4_up_down
    platform: numeric_state
  action:
  - entity_id: switch.generic_cam4_down
    service: switch.turn_on
- id: '1800999911113'
  alias: 3629cam4 Left
  trigger:
  - below: '-0.1'
    entity_id: input_number.3629cam4_left_right
    platform: numeric_state
  action:
  - entity_id: switch.generic_cam4_left
    service: switch.turn_on
- id: '1800999911114'
  alias: 3629cam4 Left Right Stop
  trigger:
  - above: '-0.1'
    below: '0.1'
    entity_id: input_number.3629cam4_left_right
    platform: numeric_state
  action:
  - entity_id: switch.generic_cam4_left
    service: switch.turn_off
  - entity_id: switch.generic_cam4_right
    service: switch.turn_off
- id: '1800999911115'
  alias: 3629cam4 Right
  trigger:
  - above: '0.1'
    entity_id: input_number.3629cam4_left_right
    platform: numeric_state
  action:
  - entity_id: switch.generic_cam4_right
    service: switch.turn_on
- id: '1533419985023'
  alias: Irrigation Run
  trigger:
  - at: 06:30:00
    platform: time
  condition:
  - condition: state
    entity_id: switch.irrigation_control_enable
    state: 'on'
  action:
  - entity_id: switch.irrigation_control_back_yard
    service: switch.turn_on
  - delay: '{{ states(''input_number.zone_1_run_minutes'') | multiply(60) | timestamp_custom(''%H:%M:%S'',False)
      }}'
  - entity_id: switch.irrigation_control_back_yard
    service: switch.turn_off
  - entity_id: switch.irrigation_control_front_yard
    service: switch.turn_on
  - delay: '{{ states(''input_number.zone_3_run_minutes'') | multiply(60) | timestamp_custom(''%H:%M:%S'',False)
      }}'
  - entity_id: switch.irrigation_control_front_yard
    service: switch.turn_off
- id: '1545515732471'
  alias: Front Yard Light on at 11:00 PM
  trigger:
  - at: '23:00'
    platform: time
  condition: []
  action:
  - data: {}
    entity_id: switch.front_yard_light
    service: switch.turn_on
- id: '1545515874358'
  alias: Front Yard Light off at 04:30 AM
  trigger:
  - at: 04:30
    platform: time
  condition: []
  action:
  - data: {}
    entity_id: switch.front_yard_light
    service: switch.turn_off
- id: '1548612260526'
  alias: Irrigation Enable
  trigger:
  - platform: template
    value_template: '{{ now().month > 4 and now().month < 9 and (''rain'' not in states.sensor.forecast_today.state
      and ''Rain'' not in states.sensor.forecast_today.state) }}'
  condition: []
  action:
  - entity_id: switch.irrigation_control_enable
    service: switch.turn_on
- id: '1548612882816'
  alias: Irrigation Disable
  trigger:
  - platform: template
    value_template: '{{ (now().month <= 4 or now().month >=9) or (''rain'' in states.sensor.forecast_today.state
      or ''Rain'' in states.sensor.forecast_today.state) }}'
  condition: []
  action:
  - entity_id: switch.irrigation_control_enable
    service: switch.turn_off
- id: '1548862723503'
  alias: Power On Utility
  trigger:
  - entity_id: switch.utility_power
    for: 00:02
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data: {}
    entity_id: switch.utility_power
    service: switch.turn_on
- id: '1552222922150'
  alias: Blinds Open at Dawn
  trigger:
  - event: sunrise
    offset: -00:20:00
    platform: sun
  condition: []
  action:
  - data:
      entity_id: all
    service: cover.open_cover_tilt
- id: '1552245394001'
  alias: Blinds Close at 11:00 PM
  trigger:
  - at: '23:00'
    platform: time
  condition: []
  action:
  - data:
      entity_id: all
    service: cover.close_cover_tilt
- id: '1552938556370'
  alias: Grow Lamp on at 06:00 AM
  trigger:
  - at: 06:00:00
    platform: time
  condition: []
  action:
  - entity_id: switch.grow_lamp
    service: switch.turn_on
- id: '1552938778764'
  alias: Grow Lamp off at 08:00 PM
  trigger:
  - at: '20:00:00'
    platform: time
  condition: []
  action:
  - entity_id: switch.grow_lamp
    service: switch.turn_off
- id: '1560461893289'
  alias: Security Lighting On Close Blinds
  trigger:
  - event: sunset
    offset: -00:30:00
    platform: sun
  condition:
  - condition: state
    entity_id: alarm_control_panel.3629_alarm
    state: armed_away
  action:
  - data: {}
    service: script.1560462776632
  - data: {}
    service: script.1571453541250
- id: '1560462571547'
  alias: Security Lighting Off
  trigger:
  - at: '21:37'
    platform: time
  condition:
  - condition: state
    entity_id: alarm_control_panel.3629_alarm
    state: armed_away
  action:
  - delay: 00:{{ (range(5, 25) | random) }}:00
  - service: script.1560463039446
- id: '1562957476111'
  alias: Family Room Ceiling Fan Remote Stop
  trigger:
  - device_id: 46b35f49b60e40bdb51cb453517d898c
    domain: binary_sensor
    entity_id: binary_sensor.fan_remote_stop
    platform: device
    type: turned_on
  condition: []
  action:
  - data:
      speed: 'off'
    entity_id: fan.family_room_ceiling_fan
    service: fan.set_speed
- id: '1562957684896'
  alias: Family Room Ceiling Fan Remote Hi
  trigger:
  - device_id: 46b35f49b60e40bdb51cb453517d898c
    domain: binary_sensor
    entity_id: binary_sensor.fan_remote_hi
    platform: device
    type: turned_on
  condition: []
  action:
  - data:
      speed: high
    entity_id: fan.family_room_ceiling_fan
    service: fan.set_speed
- id: '1562958033989'
  alias: Family Room Ceiling Fan Remote Medium
  trigger:
  - device_id: 46b35f49b60e40bdb51cb453517d898c
    domain: binary_sensor
    entity_id: binary_sensor.fan_remote_med
    platform: device
    type: turned_on
  condition: []
  action:
  - data:
      speed: medium
    entity_id: fan.family_room_ceiling_fan
    service: fan.set_speed
- id: '1562958094562'
  alias: Family Room Ceiling Fan Remote Low
  trigger:
  - device_id: 46b35f49b60e40bdb51cb453517d898c
    domain: binary_sensor
    entity_id: binary_sensor.fan_remote_low
    platform: device
    type: turned_on
  condition: []
  action:
  - data:
      speed: low
    entity_id: fan.family_room_ceiling_fan
    service: fan.set_speed
- id: '1563648409962'
  alias: Security Arm Night
  trigger:
  - at: '23:00:00'
    platform: time
  condition:
  - condition: state
    entity_id: group.family
    state: home
  - condition: state
    entity_id: alarm_control_panel.3629_alarm
    state: disarmed
  action:
  - data: {}
    entity_id: alarm_control_panel.3629_alarm
    service: alarm_control_panel.alarm_arm_night
- id: '1563648489927'
  alias: Security Disarm Home Morning
  trigger:
  - at: 06:00:00
    platform: time
  condition:
  - condition: state
    entity_id: group.family
    state: home
  - condition: state
    entity_id: alarm_control_panel.3629_alarm
    state: armed_night
  action:
  - data: {}
    entity_id: alarm_control_panel.3629_alarm
    service: alarm_control_panel.alarm_disarm
- id: '1563648590512'
  alias: Security Arm Away
  trigger:
  - entity_id: group.family
    from: home
    platform: state
    to: not_home
  condition: []
  action:
  - data: {}
    entity_id: alarm_control_panel.3629_alarm
    service: alarm_control_panel.alarm_arm_away
- id: '1563648678608'
  alias: Security Disarm Return Home
  trigger:
  - entity_id: group.family
    from: not_home
    platform: state
    to: home
  condition: []
  action:
  - data: {}
    entity_id: alarm_control_panel.3629_alarm
    service: alarm_control_panel.alarm_disarm
- id: '1572629564877'
  alias: Security Notify Front Door Opened
  description: ''
  trigger:
  - entity_id: binary_sensor.front_door
    for: 00:01:00
    platform: state
    to: open
  condition:
  - condition: state
    entity_id: alarm_control_panel.3629_alarm
    state: armed_away
  action:
  - data:
      message: The front door has been open for more than one minute
      title: Front Door Opened
    service: notify.hangouts_notify
- id: '1572629774481'
  alias: Security Notify Back Door Opened
  description: ''
  trigger:
  - entity_id: binary_sensor.back_door
    for: 00:01:00
    platform: state
    to: open
  condition:
  - condition: state
    entity_id: alarm_control_panel.3629_alarm
    state: armed_away
  action:
  - data:
      message: The back door has been open for more than one minute
      title: Back Door Opened
    service: notify.hangouts_notify
- id: '1572629944102'
  alias: Security Notify Garage Door Opened
  description: ''
  trigger:
  - entity_id: binary_sensor.garage_door
    platform: state
    to: open
  condition:
  - condition: state
    entity_id: alarm_control_panel.3629_alarm
    state: armed_away
  action:
  - data:
      message: The garage door has been open for more than one minute
      title: Garage Door Opened
    service: notify.hangouts_notify
- id: '1572630307272'
  alias: Security Notify Family Room Motion
  description: ''
  trigger:
  - entity_id: binary_sensor.family_room_motion
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: alarm_control_panel.3629_alarm
    state: armed_away
  action:
  - data:
      message: Motion has been detected in the Family Room
      title: Family Room Motion Detected
    service: notify.hangouts_notify
- id: '1572630414451'
  alias: Security Notify Master Bedrom Motion
  description: ''
  trigger:
  - entity_id: binary_sensor.master_bedroom_motion
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: alarm_control_panel.3629_alarm
    state: armed_away
  action:
  - data:
      message: Motion has been detected in the Master Bedroom
      title: Master Bedroom Motion Detected
    service: notify.hangouts_notify
- id: '1572631200037'
  alias: Notify Office Temperature Low
  description: ''
  trigger:
  - below: '50.0'
    entity_id: sensor.office_temperature
    platform: numeric_state
  condition: []
  action:
  - data:
      message: The temperature in the office is below 50 degrees
      title: Office Temperature Low
    service: notify.hangouts_notify
- id: '1572633741649'
  alias: UPS Notify Offline
  description: ''
  trigger:
  - entity_id: sensor.ups_status
    from: Online
    platform: state
    to: Offline
  condition: []
  action:
  - data:
      message: The UPS has gone OFFLINE
      title: UPS OFFLINE
    service: notify.hangouts_notify
- id: '1572633832196'
  alias: UPS Notify Online
  description: ''
  trigger:
  - entity_id: sensor.ups_status
    from: Offline
    platform: state
    to: Online
  condition: []
  action:
  - data:
      message: The UPS has come back ONLINE
      title: UPS ONLINE
    service: notify.hangouts_notify
- id: '1576173820669'
  alias: Bird bath heater off at sunset
  description: ''
  trigger:
  - event: sunset
    platform: sun
  condition:
  - condition: state
    entity_id: switch.l_5
    state: 'on'
  action:
  - alias: ''
    data: {}
    entity_id: switch.l_5
    service: switch.turn_off
- id: '1576174004779'
  alias: Bird bath heater off above 32 degrees
  description: ''
  trigger:
  - above: '32'
    entity_id: sensor.dark_sky_temperature
    platform: numeric_state
  condition:
  - condition: state
    entity_id: switch.l_5
    state: 'on'
  action:
  - data: {}
    entity_id: switch.l_5
    service: switch.turn_off
- id: '1576174236299'
  alias: Bird bath heater on below freezing daytime
  description: ''
  trigger:
  - below: '32'
    entity_id: sensor.dark_sky_temperature
    platform: numeric_state
  condition:
  - after: sunrise
    before: sunset
    condition: sun
  - condition: state
    entity_id: switch.l_5
    state: 'off'
  action:
  - data: {}
    entity_id: switch.l_5
    service: switch.turn_on
- id: '1576243291952'
  alias: Bird bath heater on at sunrise below freezing
  description: ''
  trigger:
  - event: sunrise
    platform: sun
  condition:
  - below: '32'
    condition: numeric_state
    entity_id: sensor.dark_sky_temperature
  action:
  - entity_id: switch.l_5
    service: switch.turn_on
- id: '1578535843455'
  alias: Garage latch off when door open
  description: ''
  trigger:
  - entity_id: binary_sensor.garage_door
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - entity_id: switch.garage_latch_servo
    service: switch.turn_off
- id: '1578620613401'
  alias: Humidifier off above set point
  description: ''
  trigger:
  - platform: template
    value_template: '{{ states(''sensor.master_bedroom_humidity'') | float > states(''sensor.humidifier_off'')
      | float  }}'
  condition: []
  action:
  - entity_id: switch.humidifier_power
    service: switch.turn_off
- id: '1578620814432'
  alias: Humidifier on below set point
  description: ''
  trigger:
  - platform: template
    value_template: '{{ states(''sensor.master_bedroom_humidity'') | float < states(''sensor.humidifier_on'')
      | float  }}'
  condition:
  - after: '22:00:00'
    before: 08:00:00
    condition: time
  action:
  - entity_id: switch.humidifier_power
    service: switch.turn_on
- id: '1581365990144'
  alias: Humidifier on at 20:00
  description: ''
  trigger:
  - at: '20:00:00'
    platform: time
  condition:
  - condition: template
    value_template: '{{ states(''sensor.master_bedroom_humidity'') | float < states(''sensor.humidifier_on'')
      | float }}'
  action:
  - entity_id: switch.humidifier_power
    service: switch.turn_on
- id: '1581437260727'
  alias: Thermostat set to 70 on work morning
  description: ''
  trigger:
  - at: 04:00:00
    platform: time
  condition:
  - condition: template
    value_template: '{{ is_state_attr(''calendar.susan'', ''message'', ''Work'') }}'
  - condition: template
    value_template: '{{ is_state_attr(''calendar.susan'', ''start_time'', as_timestamp(now())
      | timestamp_custom(''%Y-%m-%d'') ~ '' 06:00:00'') }}'
  action:
  - data:
      temperature: 70
    entity_id: climate.thermostat
    service: climate.set_temperature
- id: '1581601374878'
  alias: Humidifier off at 08:00
  description: ''
  trigger:
  - at: 08:00:00
    platform: time
  condition: []
  action:
  - entity_id: switch.humidifier_power
    service: switch.turn_off
- id: '1583938382449'
  alias: Garage lights on when doors opened
  description: ''
  trigger:
  - entity_id: binary_sensor.garage_door
    from: 'off'
    platform: state
    to: 'on'
  - entity_id: binary_sensor.garage_in_door
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: switch.garage_light
    service: switch.turn_on
- id: '1583939404713'
  alias: Garage lights off when no motion for 10 minutes with doors closed
  description: ''
  trigger:
  - entity_id: binary_sensor.garage_motion
    for: 00:10:00
    platform: state
    to: 'off'
  condition:
  - condition: state
    entity_id: group.garage_doors
    state: 'off'
  action:
  - data: {}
    entity_id: switch.garage_light
    service: switch.turn_off
- id: '1583940295594'
  alias: Garage lights on with motion
  description: ''
  trigger:
  - entity_id: binary_sensor.garage_motion
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: switch.garage_light
    state: 'off'
  action:
  - data: {}
    entity_id: switch.garage_light
    service: switch.turn_on
- id: '1584656811875'
  alias: Garage lights off when door closed if no motion
  description: ''
  trigger:
  - entity_id: group.garage_doors
    for: 00:00:20
    from: 'on'
    platform: state
    to: 'off'
  condition:
  - condition: state
    entity_id: binary_sensor.garage_motion
    state: 'off'
  action:
  - data: {}
    entity_id: switch.garage_light
    service: switch.turn_off
- id: '1585672107503'
  alias: Purge recorder database
  description: ''
  trigger:
  - hours: '*'
    minutes: '42'
    platform: time_pattern
    seconds: '15'
  condition: []
  action:
  - data:
      keep_days: 1
      repack: true
    service: recorder.purge
- id: '1587480575094'
  alias: Family Room Ceiling Fan Remote Light
  description: ''
  trigger:
  - device_id: 46b35f49b60e40bdb51cb453517d898c
    domain: binary_sensor
    entity_id: binary_sensor.fan_remote_light
    platform: device
    type: turned_on
  condition: []
  action:
  - data: {}
    entity_id: switch.family_room_ceiling_fan_light
    service: switch.toggle
- id: '1589219972504'
  alias: Notify Fire Downstairs
  description: ''
  trigger:
  - entity_id: binary_sensor.downstairs_smoke_detected
    for: 00:00:10
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - data:
      message: There is a fire downstairs, get to safety!
      title: FIRE Downstairs!
    service: notify.hangouts_notify
- id: '1589220124517'
  alias: Notify CO Downstairs
  description: ''
  trigger:
  - entity_id: binary_sensor.downstairs_co_detected
    for: 00:00:10
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - data:
      message: There is high CO detected downstairs, get to fresh air!
      title: CO Downstairs!
    service: notify.hangouts_notify
- id: '1589220235995'
  alias: Notify CO Upstairs
  description: ''
  trigger:
  - entity_id: binary_sensor.upstairs_co_detected
    for: 00:00:10
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - data:
      message: There is high CO detected upstairs, get to fresh air!
      title: CO Upstairs!
    service: notify.hangouts_notify
- id: '1589220336564'
  alias: Notify Fire Upstairs
  description: ''
  trigger:
  - entity_id: binary_sensor.upstairs_smoke_detected
    for: 00:00:10
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - data:
      message: There is a fire upstairs, get to safety!
      title: FIRE Upstairs!
    service: notify.hangouts_notify
- id: '1589220971925'
  alias: Notify Fire Family Room
  description: ''
  trigger:
  - entity_id: binary_sensor.family_room_fire_detected
    for: 00:00:10
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - data:
      message: There is a fire in the family room, get to safety!
      title: FIRE In Family Room!
    service: notify.hangouts_notify
- id: '1589221081422'
  alias: Notify CO Family Room
  description: ''
  trigger:
  - entity_id: binary_sensor.family_room_co_detected
    for: 00:00:10
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - data:
      message: There is high CO detected in the family room, get to fresh air!
      title: CO In Family Room!
    service: notify.hangouts_notify
